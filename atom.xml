<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>文木逝水</title>
  <subtitle>－－存在即合理－－</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://jiemoon.me/"/>
  <updated>2016-03-14T05:15:12.000Z</updated>
  <id>http://jiemoon.me/</id>
  
  <author>
    <name>Jiemoon</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hello</title>
    <link href="http://jiemoon.me/2016/03/14/hello/"/>
    <id>http://jiemoon.me/2016/03/14/hello/</id>
    <published>2016-03-14T05:15:00.000Z</published>
    <updated>2016-03-14T05:15:12.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;hello&quot;&gt;&lt;a href=&quot;#hello&quot; class=&quot;headerlink&quot; title=&quot;hello&quot;&gt;&lt;/a&gt;hello&lt;/h2&gt;&lt;h2 id=&quot;go&quot;&gt;&lt;a href=&quot;#go&quot; class=&quot;headerlink&quot; title=&quot;go&quot;&gt;&lt;/a&gt;go&lt;/h2&gt;&lt;h2 id=&quot;yes&quot;&gt;&lt;a href=&quot;#yes&quot; class=&quot;headerlink&quot; title=&quot;yes&quot;&gt;&lt;/a&gt;yes&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;hello&quot;&gt;&lt;a href=&quot;#hello&quot; class=&quot;headerlink&quot; title=&quot;hello&quot;&gt;&lt;/a&gt;hello&lt;/h2&gt;&lt;h2 id=&quot;go&quot;&gt;&lt;a href=&quot;#go&quot; class=&quot;headerlink&quot; title=&quot;go&quot;&gt;&lt;/a&gt;g
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Rails 中使用 ElasticSearch</title>
    <link href="http://jiemoon.me/2016/03/14/use-elasticsearch-in-rails/"/>
    <id>http://jiemoon.me/2016/03/14/use-elasticsearch-in-rails/</id>
    <published>2016-03-14T05:01:33.000Z</published>
    <updated>2016-03-14T05:22:02.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Why&quot;&gt;&lt;a href=&quot;#Why&quot; class=&quot;headerlink&quot; title=&quot;Why&quot;&gt;&lt;/a&gt;Why&lt;/h2&gt;&lt;p&gt;在实际应用中如果可以让用户快速的搜索出自己想要的内容，这将会是一个很有用的功能。那么要怎么来实现呢？&lt;/p&gt;
&lt;p&gt;像简单一点的方法可以使用 SQL 的 &lt;code&gt;LIKE&lt;/code&gt; 来实现，如&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; articles &lt;span class=&quot;keyword&quot;&gt;WHERE&lt;/span&gt; title &lt;span class=&quot;keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%小苹果%&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但这样实现对数据量很大的表，其实是相当耗时的。而且在其它业务下，我们可以会对用户提交的搜索词，进行分词。在分词后，上面的SQL 可能就变成&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; articles &lt;span class=&quot;keyword&quot;&gt;WHERE&lt;/span&gt; title &lt;span class=&quot;keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%小苹果%&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%苹果%&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;%小%&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样效率肯定更低了。这时候我们可以使用 第三方的搜索程序，来减少数据库的压力，像 &lt;code&gt;elasticsearch&lt;/code&gt;，&lt;code&gt;Solr&lt;/code&gt; 等等。&lt;/p&gt;
&lt;p&gt;我们这里选择 &lt;code&gt;elasticsearch&lt;/code&gt;，具体可以看这里 &lt;a href=&quot;http://www.cnblogs.com/chowmin/articles/4629220.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Elasticsearch 与 Solr&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果还不知道 elasticsearch，请選 &lt;a href=&quot;http://www.jianshu.com/p/8ab9fe3d3481&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ElasticSearch 入门&lt;/a&gt; &lt;/p&gt;
&lt;h2 id=&quot;安装-Gem&quot;&gt;&lt;a href=&quot;#安装-Gem&quot; class=&quot;headerlink&quot; title=&quot;安装 Gem&quot;&gt;&lt;/a&gt;安装 Gem&lt;/h2&gt;&lt;p&gt;Rails 下使用 ElasticSearch ，可以使用 &lt;a href=&quot;https://github.com/elastic/elasticsearch-rails&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;elasticsearch-rails&lt;/a&gt; 这个 Gem&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Gemfile&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 搜索&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;elasticsearch-model&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem &lt;span class=&quot;string&quot;&gt;&#39;elasticsearch-rails&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ bundle&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;配置-Model&quot;&gt;&lt;a href=&quot;#配置-Model&quot; class=&quot;headerlink&quot; title=&quot;配置 Model&quot;&gt;&lt;/a&gt;配置 Model&lt;/h2&gt;&lt;p&gt;打开要添加搜索的 model 类，添加如下内容&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# app/models/article.rb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &lt;span class=&quot;keyword&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;elasticsearch/model&#39;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Article&lt;/span&gt; &amp;lt; ActiveRecord::Base&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   &lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;Elasticsearch:&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:Model&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   &lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;Elasticsearch:&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:Model&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;:Callbacks&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   settings &lt;span class=&quot;symbol&quot;&gt;index:&lt;/span&gt; &amp;#123; &lt;span class=&quot;symbol&quot;&gt;number_of_shards:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+     mappings &lt;span class=&quot;symbol&quot;&gt;dynamic:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;false&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+       indexes &lt;span class=&quot;symbol&quot;&gt;:title&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+     &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &lt;span class=&quot;comment&quot;&gt;# Delete the previous articles index in Elasticsearch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ Article.__elasticsearch_&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;.client.indices.delete &lt;span class=&quot;symbol&quot;&gt;index:&lt;/span&gt; Article.index_name &lt;span class=&quot;keyword&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &lt;span class=&quot;comment&quot;&gt;# Create the new index with the new mapping&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ Article.__elasticsearch_&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;.client.indices.create \\&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   &lt;span class=&quot;symbol&quot;&gt;index:&lt;/span&gt; Article.index_name,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+   &lt;span class=&quot;symbol&quot;&gt;body:&lt;/span&gt; &amp;#123; &lt;span class=&quot;symbol&quot;&gt;settings:&lt;/span&gt; Article.settings.to_hash, &lt;span class=&quot;symbol&quot;&gt;mappings:&lt;/span&gt; Article.mappings.to_hash &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ &lt;span class=&quot;comment&quot;&gt;# Index all article records from the DB to Elasticsearch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ Article.import &lt;span class=&quot;symbol&quot;&gt;force:&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h2&gt;&lt;p&gt;添加 &lt;strong&gt;app/controllers/search_controller.rb&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SearchController&lt;/span&gt; &amp;lt; ApplicationController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;search&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; params[&lt;span class=&quot;symbol&quot;&gt;:q&lt;/span&gt;].&lt;span class=&quot;keyword&quot;&gt;nil&lt;/span&gt;?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      @result = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      @result = Article.search(params[&lt;span class=&quot;symbol&quot;&gt;:q&lt;/span&gt;]).paginate(&lt;span class=&quot;symbol&quot;&gt;page:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;per_page:&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;添加 &lt;strong&gt; app/views/search/search.html.erb&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight erb&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;h1&amp;gt;Articles Search&amp;lt;/h1&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;%=&lt;span class=&quot;ruby&quot;&gt; form_for search_path, &lt;span class=&quot;symbol&quot;&gt;method:&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;:get&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; |f| &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt; f.label &lt;span class=&quot;string&quot;&gt;&quot;Search for&quot;&lt;/span&gt; &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt; text_field_tag &lt;span class=&quot;symbol&quot;&gt;:q&lt;/span&gt;, params[&lt;span class=&quot;symbol&quot;&gt;:q&lt;/span&gt;] &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;%=&lt;span class=&quot;ruby&quot;&gt; submit_tag &lt;span class=&quot;string&quot;&gt;&quot;Go&quot;&lt;/span&gt;, &lt;span class=&quot;symbol&quot;&gt;name:&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;nil&lt;/span&gt; &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;%&lt;span class=&quot;ruby&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;%&lt;span class=&quot;ruby&quot;&gt; @result.records.each_with_hit &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; |item, hit| &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;p&amp;gt;&amp;lt;%=&lt;span class=&quot;ruby&quot;&gt; item.title &lt;/span&gt;%&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;%&lt;span class=&quot;ruby&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; &lt;/span&gt;%&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;../images/elasticsearch-in-rails.png&quot; alt=&quot;运行结果&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Why&quot;&gt;&lt;a href=&quot;#Why&quot; class=&quot;headerlink&quot; title=&quot;Why&quot;&gt;&lt;/a&gt;Why&lt;/h2&gt;&lt;p&gt;在实际应用中如果可以让用户快速的搜索出自己想要的内容，这将会是一个很有用的功能。那么要怎么来实现呢？&lt;/p&gt;
&lt;p&gt;像简单一点的方法
    
    </summary>
    
    
      <category term="rails" scheme="http://jiemoon.me/tags/rails/"/>
    
      <category term="elasticsearch" scheme="http://jiemoon.me/tags/elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>Git 日记：如何更新 fork 过来的项目</title>
    <link href="http://jiemoon.me/2015/12/31/how-to-update-git-project-from-fork/"/>
    <id>http://jiemoon.me/2015/12/31/how-to-update-git-project-from-fork/</id>
    <published>2015-12-31T06:49:13.000Z</published>
    <updated>2016-03-14T05:05:13.000Z</updated>
    
    <content type="html">&lt;p&gt;当我们把别人的项目 &lt;code&gt;fork&lt;/code&gt; 过来后，当源更新后，我们要怎样才能更新自己 fork 过来的项目呢？是要重新 &lt;code&gt;fork&lt;/code&gt;，这当然可以，但有更好的方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在 &lt;code&gt;fork&lt;/code&gt; 的代码库中添加上游代码库的 remote 源，该操作只需操作一次即可。&lt;br&gt;如: 其中 &lt;code&gt;{upstream}&lt;/code&gt; 表示上游代码库名，可以任意命名。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git remote add &amp;#123;upstream&amp;#125; git@github.com:soimort/you-get.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将本地的修改提交 commit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在每次 Pull Request 前做如下操作，即可实现和上游版本库的同步&lt;br&gt;   3.1 ： &lt;code&gt;git remote update upstream&lt;/code&gt;&lt;br&gt;   3.2 ： &lt;code&gt;git rebase upstream/{branch name}&lt;/code&gt;&lt;br&gt;   需要注意的是在操作 3.2 之前，一定要将 &lt;code&gt;checkout&lt;/code&gt; 到 &lt;code&gt;{branch name}&lt;/code&gt; 所指定的 &lt;code&gt;branch&lt;/code&gt;&lt;br&gt;   如: &lt;code&gt;git checkout develop&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Push 代码到 Github&lt;/p&gt;
 &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git push origin develop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;参考: &lt;a href=&quot;http://www.oschina.net/question/118031_129007&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.oschina.net/question/118031_129007&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;当我们把别人的项目 &lt;code&gt;fork&lt;/code&gt; 过来后，当源更新后，我们要怎样才能更新自己 fork 过来的项目呢？是要重新 &lt;code&gt;fork&lt;/code&gt;，这当然可以，但有更好的方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在 &lt;code&gt;fork&lt;/code&gt; 的
    
    </summary>
    
    
      <category term="git" scheme="http://jiemoon.me/tags/git/"/>
    
  </entry>
  
</feed>
